module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={};this.getAttemptToRemove=function(){return t.attemptToRemove},this.setAttemptToRemove=function(e){t.attemptToRemove=e},this.setDraggedElement=function(e){t.draggedElement=e},this.getDraggedElement=function(){return t.draggedElement},this.registerPaletteElements=function(e){t.registeredPaletteElements=e},this.getRegisteredPaletteElements=function(){return t.registeredPaletteElements},this.error=function(e){return console.error(e),!1},this.log=function(e){return console.log(e),!0}};t.default=r},function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(16)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var i=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={},n={change:[]};t.tree=[{id:"root",fields:[]}];var r=function(){n.change.forEach(function(e){return e(t.tree)})};this.updateState=function(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};!function e(n,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.tree,i=a.find(function(e){return e.id===r}),s=!1;if(i){if(n===r)i.fields=o;else if(i.fields&&o.length){var u=[];o.forEach(function(e){var t=i.fields.findIndex(function(t){return t.id===e.id});-1===t?u.push(e):i.fields=i.fields.map(function(n,r){return r===t?e:n})}),u.length&&(i.fields=i.fields.concat(u))}else n&&i.fields?i.fields=i.fields.filter(function(e){return e.dropzoneID!==n}):i.fields=o;s=!0}else for(var l=0;l<a.length;l++){var f=a[l].fields,c=!1;if(f&&(c=e(n,r,o,f)),c)break}return s}(e,n,o),a(t.tree),r()},this.getState=function(){return t.tree},this.clearState=function(){var e=t.tree[0],n=e.fields.length;return e.fields.forEach(function(e,t){e.flushDroppedElements(function(){t===n-1&&r()})}),!0},this.addEventListener=function(e,t){var r=null;return"function"!=typeof t?(a.default.error("`cb` param has to be function"),!1):(Object.prototype.hasOwnProperty.call(n,e)?(n[e].push(t),r=t):a.default.error("No such event"),r)},this.removeEventListener=function(e,t){Object.prototype.hasOwnProperty.call(n,e)?n[e]=n[e].filter(function(e){return e!==t}):a.default.error("No such event")}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=f(a),s=f(n(2)),u=f(n(3)),l=f(n(0));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return d.call(n),n.canvasRef=i.default.createRef(),n.state={initialElements:[],droppedElements:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentWillMount",value:function(){this._setInitialElements(this.props.initialElements)}},{key:"componentWillReceiveProps",value:function(e){var t=e.initialElements;this._setInitialElements(t)}},{key:"render",value:function(){var e=this,t=this.state.droppedElements,n=this.props,o=n.capacity,a=n.id;return i.default.createElement("div",{ref:this.canvasRef,className:(o&&o===t.length?"no-space":"")+" "+("root"===a?"canvas":"")+" dropzone",onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDragEnter:this._onDragEnter,onDrop:this._onDrop,onDragEnd:this._onDragEnd},t.map(function(t){return e._renderDragItem(r({},t))}),t.length?null:i.default.createElement("div",{className:("root"===a?"canvas":"")+" dropzone"},i.default.createElement("p",{className:"dropzone-empty"},"Drop Here")))}}]),t}(),d=function(){var e=this;this._setInitialElements=function(t){if(Array.isArray(t)&&t.length&&!e.state.initialElements.length){var n=e.props.id,o=t.map(function(t){return r({},t,{key:t.id,dropzoneID:n,showBasicContent:!1,removeElement:e._removeElement,flushDroppedElements:e._flushDroppedElements,checkAndRemoveElement:e._checkAndRemoveElement})});e.setState({initialElements:o,droppedElements:o},function(){return e._updateState()})}},this._manageInsideClass=function(t,n){var r=t.target;e.canvasRef.current===r&&r.classList[n]("inside")},this._removeElement=function(t){var n=e.state.droppedElements.findIndex(function(e){return e.id===t});e.setState({droppedElements:e.state.droppedElements.filter(function(e,t){return t!==n})},function(){return e._updateState()})},this._updateState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=e.props,r=n.id,o=n.parentID;u.default.updateState(r,o,e.state.droppedElements,t)},this._flushDroppedElements=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e.setState({droppedElements:[]},function(){return e._updateState(t)})},this._checkAndRemoveElement=function(){var t=l.default.getDraggedElement(),n=t.removeElement,r=t.elementID,o=e.props.onElementMove(t),a=!l.default.getAttemptToRemove();o&&a&&n(r)},this._onDragOver=function(e){e.preventDefault()},this._onDragLeave=function(t){e._manageInsideClass(t,"remove"),l.default.setAttemptToRemove(!0)},this._onDragEnter=function(t){e._manageInsideClass(t,"add"),l.default.setAttemptToRemove(!1)},this._onDrop=function(t){t.preventDefault(),t.stopPropagation(),l.default.setAttemptToRemove(!1),e._manageInsideClass(t,"remove");var n=e.props.onDrop,o=JSON.parse(t.dataTransfer.getData("data"));return o=r({},o),n?n(o,e._addElement):e._addElement(o)},this._addElement=function(t){var n=e.props,o=n.id,a=n.capacity,i=l.default.getDraggedElement(),s=!t||!t.id,u=t.id&&e.state.droppedElements.filter(function(e){return e.id===t.id}).length;if(s||u)return l.default.error("Duplicate or invalid ID");var f=e.state.droppedElements.concat(r({},t,{key:t.id,dropzoneID:o,showBasicContent:!1,removeElement:e._removeElement,flushDroppedElements:e._flushDroppedElements,checkAndRemoveElement:e._checkAndRemoveElement}));return a&&f.length>a?l.default.error("Maximum capacity of canvas("+o+") is "+a):(e.setState({droppedElements:f},function(){i&&"function"==typeof i.checkAndRemoveElement&&i.checkAndRemoveElement(),e._updateState()}),{dropzoneID:o,elements:f})},this._renderDragItem=function(e){var t=l.default.getRegisteredPaletteElements().find(function(t){return t.type===e.type});return t?i.default.createElement(t.component,e):null}};c.propTypes={id:s.default.string.isRequired,capacity:s.default.number,onDrop:s.default.func,onElementMove:s.default.func,initialElements:s.default.instanceOf(s.default.array),parentID:s.default.string.isRequired},c.defaultProps={initialElements:[],onElementMove:function(){return!0}},t.default=c},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,l=0,f=[],c=n(5);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(b(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(b(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function m(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=l++;n=u||(u=v(t)),r=_.bind(null,n,i,!1),o=_.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=c(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(s=a[i.id]).refs--,r.push(s)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete a[s.id]}}}};var y,E=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function _(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"/* Very basic style */\r\n\r\n/* Prevent the text contents of draggable elements from being selectable. */\r\n[draggable] {\r\n  -moz-user-select: none;\r\n  -khtml-user-select: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n\r\n  /* Required to make elements draggable in old WebKit */\r\n  -khtml-user-drag: element;\r\n  -webkit-user-drag: element;\r\n}\r\n\r\n/* class gets appended to canvas when user dragging over on it */\r\n.inside {\r\n  -webkit-box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\r\n  -moz-box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\r\n  box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\r\n}\r\n\r\n.trash-box.inside,\r\n.dropzone.inside.no-space {\r\n  -webkit-box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.5);\r\n  -moz-box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.75);\r\n  box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.75);\r\n}\r\n\r\n.dropzone {\r\n  width: 100%;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  background: #f0faff;\r\n  border: 1px solid #0277bd;\r\n}\r\n\r\n.palette {\r\n  padding: 10px;\r\n  background: #fff;\r\n  box-sizing: border-box;\r\n  border: 1px solid #01579b;\r\n}\r\n\r\n.drag-item {\r\n  padding: 10px;\r\n  color: #01579b;\r\n  box-sizing: border-box;\r\n  background-color: #b3e5fc;\r\n  border: 1px solid #01579b;\r\n}\r\n\r\n.dropzone-empty {\r\n  color: #01579b;\r\n  text-align: center;\r\n  animation-name: changeColor;\r\n  animation-duration: 2s;\r\n  animation-timing-function: ease-in-out;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n@keyframes changeColor {\r\n  25% {\r\n    transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n\r\n  75% {\r\n    transform: scale(1);\r\n    opacity: 0.5;\r\n  }\r\n}\r\n\r\n.palette-wrapper .drag-item {\r\n  color: #fff;\r\n  background-color: #01579b;\r\n}\r\n\r\n.drag-item + div {\r\n  margin-top: 10px;\r\n}\r\n\r\n.trash-box {\r\n  padding: 30px 10px;\r\n  margin: 10px 0;\r\n  color: #b71c1c;\r\n  background: #ffcdd2;\r\n  text-align: center;\r\n  border: 1px solid #b71c1c;\r\n}\r\n",""])},function(e,t,n){var r=n(8);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),i=u(n(2)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._manageInsideClass=function(e,t){var r=e.target;n.trashRef.current===r&&r.classList[t]("inside")},n._onDrop=function(e){e.preventDefault(),e.stopPropagation();var t=s.default.getDraggedElement();if(!t)return!1;var r=n.props,o=r.onBeforeTrash,a=r.onAfterTrash,i=t.removeElement,u=o(t);return n._manageInsideClass(e,"remove"),u&&s.default.getAttemptToRemove()&&(i(t.elementID),s.default.setDraggedElement(null),a()),s.default.setAttemptToRemove(!1),!0},n._onDragOver=function(e){e.preventDefault()},n._onDragLeave=function(e){n._manageInsideClass(e,"remove")},n._onDragEnter=function(e){s.default.getDraggedElement()&&n._manageInsideClass(e,"add")},n.trashRef=a.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",{ref:this.trashRef,className:"trash-box",onDragLeave:this._onDragLeave,onDragEnter:this._onDragEnter,onDragOver:this._onDragOver,onDrop:this._onDrop},this.props.children||a.default.createElement("span",null,"Trash Box"))}}]),t}();l.propTypes={onBeforeTrash:i.default.func,onAfterTrash:i.default.func,children:i.default.oneOfType([i.default.arrayOf(i.default.element),i.default.element])},l.defaultProps={onBeforeTrash:function(){return!0},onAfterTrash:function(){return!0}},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=l(a),s=l(n(2)),u=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r._renderList=function(e){var t=u.default.getRegisteredPaletteElements().find(function(t){return t.type===e.type});return t?i.default.createElement(t.component,e):null},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props.paletteElements;return i.default.createElement("div",{className:"palette"},t.map(function(t){return e._renderList(r({},t,{key:t.id,showBasicContent:!0}))}))}}]),t}();c.propTypes={paletteElements:s.default.arrayOf(function(e){var t=!1;return e.forEach(function(n){n&&!n.id&&(t="`id` is required in all palette element"),e.filter(function(e){return e.id===n.id}).length>1&&(t="`id` of palette element should be unique")}),!t||new Error(t)})},c.defaultProps={paletteElements:[]},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=l(a),s=l(n(2)),u=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r._dragEnd=function(e){e.stopPropagation(),u.default.setDraggedElement(null)},r._dragStart=function(e){e.stopPropagation();var t=r.props,n=t.id,o=t.type,a=t.name,i=t.payload,s=t.dropzoneID,l=t.removeElement,f=t.checkAndRemoveElement,c={id:n,type:o,name:a,payload:i};e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("data",JSON.stringify(c)),s&&u.default.setDraggedElement({elementID:n,dropzoneID:s,removeElement:l,checkAndRemoveElement:f})},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props.elementProps;return i.default.createElement("div",r({className:"drag-item",onDragStart:this._dragStart,onDragEnd:this._dragEnd,draggable:!0},e),this.props.children)}}]),t}();c.propTypes={id:s.default.string.isRequired,name:s.default.string,dropzoneID:s.default.string,payload:s.default.instanceOf(s.default.object),elementProps:s.default.instanceOf(s.default.object),type:s.default.string.isRequired,children:s.default.oneOfType([s.default.arrayOf(s.default.element),s.default.element]).isRequired,removeElement:s.default.func,checkAndRemoveElement:s.default.func},c.defaultProps={checkAndRemoveElement:function(){return!0},elementProps:null,payload:null},t.default=c},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,a,i,s,u){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,a,i,s,u],c=0;(l=new Error(t.replace(/%s/g,function(){return f[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var r=n(15),o=n(14),a=n(13);e.exports=function(){function e(e,t,n,r,i,s){s!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=i(n(1)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement("div",{className:"main-canvas"},o.default.createElement(a.default,r({},e,{parentID:"root",id:"root"})))}},function(e,t,n){"use strict";var r=f(n(17)),o=f(n(4)),a=f(n(12)),i=f(n(11)),s=f(n(10)),u=f(n(3)),l=f(n(0));function f(e){return e&&e.__esModule?e:{default:e}}n(9),e.exports={Canvas:r.default,Dropzone:o.default,Draggable:a.default,Palette:i.default,Trash:s.default,state:u.default,core:l.default,registerPaletteElements:l.default.registerPaletteElements}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29yZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL3N0YXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Ryb3B6b25lL0Ryb3B6b25lLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/NzUyOCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9UcmFzaC9UcmFzaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9QYWxldHRlL1BhbGV0dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRHJhZ2dhYmxlL0RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZianMvbGliL2ludmFyaWFudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQ2FudmFzL0NhbnZhcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvcmUiLCJDb3JlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImdldEF0dGVtcHRUb1JlbW92ZSIsImF0dGVtcHRUb1JlbW92ZSIsInNldEF0dGVtcHRUb1JlbW92ZSIsInN0YXR1cyIsInNldERyYWdnZWRFbGVtZW50IiwiZHJhZ2dlZEVsZW1lbnQiLCJnZXREcmFnZ2VkRWxlbWVudCIsInJlZ2lzdGVyUGFsZXR0ZUVsZW1lbnRzIiwicmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyIsImdldFJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMiLCJlcnJvciIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwicmVxdWlyZSIsIl9jb3JlIiwic3RhdGUiLCJTdGF0ZSIsImV2ZW50IiwiY2hhbmdlIiwidHJlZSIsImlkIiwiZmllbGRzIiwibm90aWZ5U3RhdGVDaGFuZ2UiLCJmb3JFYWNoIiwiZSIsInVwZGF0ZVN0YXRlIiwiZHJvcHpvbmVJRCIsInBhcmVudElEIiwiY2IiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0cmF2ZXJzZUFuZFVwZGF0ZVRyZWUiLCJ1cGRhdGVkRmllbGRzIiwibWF0Y2hlZFBhcmVudENhbnZhcyIsImZpbmQiLCJmaWVsZCIsInJldHVyblN0YXR1cyIsImZpZWxkc1RvQmVBZGRlZCIsInVGaWVsZCIsImZpZWxkSW5kZXgiLCJmaW5kSW5kZXgiLCJmIiwicHVzaCIsIm1hcCIsImNvbmNhdCIsImZpbHRlciIsImNoaWxkRmllbGRzIiwiZ2V0U3RhdGUiLCJjbGVhclN0YXRlIiwicm9vdE5vZGUiLCJ0b3BMZXZlbEZpZWxkcyIsInRvcExldmVsRWxlbWVudCIsImZsdXNoRHJvcHBlZEVsZW1lbnRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50TmFtZSIsInJldHVybkNCIiwiX2NvcmUyIiwiZGVmYXVsdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfcmVhY3QiLCJEcm9wem9uZSIsInByb3BzIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsImdldFByb3RvdHlwZU9mIiwiX2luaXRpYWxpc2VQcm9wcyIsImNhbnZhc1JlZiIsIl9yZWFjdDIiLCJjcmVhdGVSZWYiLCJpbml0aWFsRWxlbWVudHMiLCJkcm9wcGVkRWxlbWVudHMiLCJfc2V0SW5pdGlhbEVsZW1lbnRzIiwiX3JlZiIsIl90aGlzMiIsIl9wcm9wcyIsImNhcGFjaXR5IiwiY3JlYXRlRWxlbWVudCIsInJlZiIsImNsYXNzTmFtZSIsIm9uRHJhZ092ZXIiLCJfb25EcmFnT3ZlciIsIm9uRHJhZ0xlYXZlIiwiX29uRHJhZ0xlYXZlIiwib25EcmFnRW50ZXIiLCJfb25EcmFnRW50ZXIiLCJvbkRyb3AiLCJfb25Ecm9wIiwib25EcmFnRW5kIiwiX29uRHJhZ0VuZCIsIl9yZW5kZXJEcmFnSXRlbSIsIl9leHRlbmRzIiwiQXJyYXkiLCJpc0FycmF5IiwiX3RoaXMzIiwidXBkYXRlZEluaXRpYWxJdGVtcyIsImtleSIsInNob3dCYXNpY0NvbnRlbnQiLCJyZW1vdmVFbGVtZW50IiwiX3JlbW92ZUVsZW1lbnQiLCJfZmx1c2hEcm9wcGVkRWxlbWVudHMiLCJjaGVja0FuZFJlbW92ZUVsZW1lbnQiLCJfY2hlY2tBbmRSZW1vdmVFbGVtZW50Iiwic2V0U3RhdGUiLCJfdXBkYXRlU3RhdGUiLCJfbWFuYWdlSW5zaWRlQ2xhc3MiLCJfcmVmMiIsImFjdGlvbiIsInRhcmdldCIsImN1cnJlbnQiLCJjbGFzc0xpc3QiLCJlbGVtZW50SUQiLCJpbmRleCIsIl9wcm9wczIiLCJfc3RhdGUyIiwiZWxlbWVudE1vdmVkIiwib25FbGVtZW50TW92ZSIsImF0dGVtcHRUb01vdmUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiX2FkZEVsZW1lbnQiLCJ1cGRhdGVkRGF0YSIsIl9wcm9wczMiLCJpbnZhbGlkVXBkYXRlZERhdGEiLCJrZXlBbHJlYWR5UHJlc2VudCIsIm5ld0VsZW1lbnRzIiwiZWxlbWVudHMiLCJlbGVtZW50IiwidHlwZSIsImNvbXBvbmVudCIsInByb3BUeXBlcyIsIl9wcm9wVHlwZXMyIiwic3RyaW5nIiwiaXNSZXF1aXJlZCIsIm51bWJlciIsImZ1bmMiLCJpbnN0YW5jZU9mIiwiYXJyYXkiLCJkZWZhdWx0UHJvcHMiLCJjc3MiLCJsb2NhdGlvbiIsIndpbmRvdyIsIkVycm9yIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsImluZGV4T2YiLCJzdHJpbmdpZnkiLCJmbiIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJkb2N1bWVudCIsImFsbCIsImF0b2IiLCJhcHBseSIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsIm9wdGlvbnMiLCJpdGVtIiwiZG9tU3R5bGUiLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJsaXN0IiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJtZWRpYSIsInNvdXJjZU1hcCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiZmlyc3RDaGlsZCIsImJlZm9yZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImlkeCIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImF0dHJzIiwiYWRkQXR0cnMiLCJlbCIsImtleXMiLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJ0cmFuc2Zvcm0iLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwiYnRvYSIsImxpbmsiLCJyZWwiLCJjcmVhdGVMaW5rRWxlbWVudCIsImF1dG9GaXhVcmxzIiwiY29udmVydFRvQWJzb2x1dGVVcmxzIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJibG9iIiwib2xkU3JjIiwiaHJlZiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiQm9vbGVhbiIsImpvaW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsInVzZVNvdXJjZU1hcCIsInRvU3RyaW5nIiwiY29udGVudCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaG1yIiwibG9jYWxzIiwiVHJhc2giLCJ0cmFzaFJlZiIsImVsZW1lbnRUb0JlVHJhc2hlZCIsIl90aGlzJHByb3BzIiwib25CZWZvcmVUcmFzaCIsIm9uQWZ0ZXJUcmFzaCIsImNoaWxkcmVuIiwib25lT2ZUeXBlIiwiYXJyYXlPZiIsIlBhbGV0dGUiLCJfcmVuZGVyTGlzdCIsInBhbGV0dGVFbGVtZW50cyIsInByb3BWYWx1ZSIsImlzRXJyb3IiLCJEcmFnZ2FibGUiLCJfZHJhZ0VuZCIsIl9kcmFnU3RhcnQiLCJwYXlsb2FkIiwiZWZmZWN0QWxsb3dlZCIsInNldERhdGEiLCJlbGVtZW50UHJvcHMiLCJvbkRyYWdTdGFydCIsImRyYWdnYWJsZSIsInZhbGlkYXRlRm9ybWF0IiwiZm9ybWF0IiwiY29uZGl0aW9uIiwiYSIsImIiLCJhcmdzIiwiYXJnSW5kZXgiLCJmcmFtZXNUb1BvcCIsIm1ha2VFbXB0eUZ1bmN0aW9uIiwiYXJnIiwiZW1wdHlGdW5jdGlvbiIsInRoYXRSZXR1cm5zIiwidGhhdFJldHVybnNGYWxzZSIsInRoYXRSZXR1cm5zVHJ1ZSIsInRoYXRSZXR1cm5zTnVsbCIsInRoYXRSZXR1cm5zVGhpcyIsInRoYXRSZXR1cm5zQXJndW1lbnQiLCJpbnZhcmlhbnQiLCJSZWFjdFByb3BUeXBlc1NlY3JldCIsInNoaW0iLCJwcm9wTmFtZSIsImNvbXBvbmVudE5hbWUiLCJwcm9wRnVsbE5hbWUiLCJzZWNyZXQiLCJnZXRTaGltIiwiUmVhY3RQcm9wVHlwZXMiLCJib29sIiwic3ltYm9sIiwiYW55Iiwibm9kZSIsIm9iamVjdE9mIiwib25lT2YiLCJzaGFwZSIsImV4YWN0IiwiY2hlY2tQcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJfRHJvcHpvbmUyIiwiQ2FudmFzIl0sIm1hcHBpbmdzIjoiMkJBQ0Es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QUllLFNBQUFnRyxHQUFBLE9BQ2JPLEVBQUFYLFFBQUFvQixjQUFBLE9BQUtFLFVBQVUsZUFDYlgsRUFBQVgsUUFBQW9CLGNBQUEyUCxFQUFBL1EsUUFBQWtDLEtBQWM5QixHQUFPbkMsU0FBUyxPQUFPUCxHQUFHLDBDQ1A1QyxRQUFBdEQsRUFBQSxTQUNBQSxFQUFBLFFBQ0FBLEVBQUEsU0FDQUEsRUFBQSxTQUNBQSxFQUFBLFNBR0FBLEVBQUEsUUFDQUEsRUFBQSx1REFHQUEsRUFBQSxHQUVBRyxFQUFPRCxTQUVMMFcsaUJBQ0E3USxtQkFDQStOLG9CQUNBTCxrQkFDQVQsZ0JBR0EvUCxnQkFDQXBCLGVBR0FXLHdCQUF5Qm1ELEVBQUFDLFFBQUtwRCIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTgpO1xuIiwiY2xhc3MgQ29yZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAvLyBtYWluIG9iamVjdC9zdG9yZVxyXG4gICAgY29uc3QgY29yZSA9IHt9O1xyXG5cclxuICAgIC8vIGFsbCBwdWJsaWMgZ2V0dGVyL3NldHRlciBnb2VzIGhlcmVcclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHRvIGdldCBhdHRlbXB0VG9SZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBhdHRlbXB0VG9SZW1vdmVcclxuICAgICAqL1xyXG4gICAgdGhpcy5nZXRBdHRlbXB0VG9SZW1vdmUgPSAoKSA9PiAoY29yZS5hdHRlbXB0VG9SZW1vdmUpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gdG8gc2V0IHVzZXIncyBhdHRlbXB0IHRvIHJlbW92ZSB0aGUgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzdGF0dXNcclxuICAgICAqL1xyXG4gICAgdGhpcy5zZXRBdHRlbXB0VG9SZW1vdmUgPSAoc3RhdHVzKSA9PiB7XHJcbiAgICAgIGNvcmUuYXR0ZW1wdFRvUmVtb3ZlID0gc3RhdHVzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHRvIHNldCBkcmFnZ2VkIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkcmFnZ2VkRWxlbWVudFxyXG4gICAgICovXHJcbiAgICB0aGlzLnNldERyYWdnZWRFbGVtZW50ID0gKGRyYWdnZWRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvcmUuZHJhZ2dlZEVsZW1lbnQgPSBkcmFnZ2VkRWxlbWVudDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0byByZXR1cm4gZHJhZ2dlZCBlbGVtZW50XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAgICovXHJcbiAgICB0aGlzLmdldERyYWdnZWRFbGVtZW50ID0gKCkgPT4gKGNvcmUuZHJhZ2dlZEVsZW1lbnQpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gdG8gcmVnaXN0ZXIgcGFsZXR0ZSBlbGVtZW50c1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gcmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyAtIHBhbGV0dGUgZWxlbWVudHNcclxuICAgICAqL1xyXG4gICAgdGhpcy5yZWdpc3RlclBhbGV0dGVFbGVtZW50cyA9IChyZWdpc3RlcmVkUGFsZXR0ZUVsZW1lbnRzKSA9PiB7XHJcbiAgICAgIGNvcmUucmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyA9IHJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gdG8gcmV0dXJuIHJlZ2lzdGVyZWQgcGFsZXR0ZSBlbGVtZW50c1xyXG4gICAgICogQHJldHVybnMge0FycmF5fSAtIGFycmF5IG9mIHBhbGV0dGUgZWxlbWVudHNcclxuICAgICAqL1xyXG4gICAgdGhpcy5nZXRSZWdpc3RlcmVkUGFsZXR0ZUVsZW1lbnRzID0gKCkgPT4gKGNvcmUucmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyk7XHJcblxyXG4gICAgLyogZXNsaW50IG5vLWNvbnNvbGU6MCAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gdG8gZ2l2ZSBhbiBlcnJvciBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAtIGFueSBtZXNzYWdlIHRvIGJlIHByaW50XHJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5lcnJvciA9IChtZXNzYWdlKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0byBsb2cgYSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAtIGFueSBtZXNzYWdlIHRvIGJlIHByaW50XHJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5sb2cgPSAobWVzc2FnZSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgY29yZSA9IG5ldyBDb3JlKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb3JlO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdFwiKTsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIFN5bWJvbC5mb3IgJiZcbiAgICBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykpIHx8XG4gICAgMHhlYWM3O1xuXG4gIHZhciBpc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgb2JqZWN0ICE9PSBudWxsICYmXG4gICAgICBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbiAgfTtcblxuICAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICB2YXIgdGhyb3dPbkRpcmVjdEFjY2VzcyA9IHRydWU7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9mYWN0b3J5V2l0aFR5cGVDaGVja2VycycpKGlzVmFsaWRFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKTtcbn0gZWxzZSB7XG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuXG4gIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2RcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcycpKCk7XG59XG4iLCJpbXBvcnQgY29yZSBmcm9tICcuL2NvcmUnO1xyXG5cclxuY2xhc3MgU3RhdGUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgLy8gYWxsIHByaXZhdGUgdmFyaWJhbGUgZ29lcyBoZXJlXHJcbiAgICBjb25zdCBzdGF0ZSA9IHt9O1xyXG4gICAgY29uc3QgZXZlbnQgPSB7XHJcbiAgICAgIGNoYW5nZTogW11cclxuICAgIH07XHJcblxyXG4gICAgLy8gc2V0IGJhc2VcclxuICAgIHN0YXRlLnRyZWUgPSBbe1xyXG4gICAgICBpZDogJ3Jvb3QnLFxyXG4gICAgICBmaWVsZHM6IFtdXHJcbiAgICB9XTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHByaXZhdGUgZnVuY3Rpb24gdG8gdHJhdmVyc2UgdGhyb3VnaCBlYWNoIG5vZGUgYW5kIHVwZGF0ZSB0aGUgY29ycmVzcG9uZGluZyBub2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHJvcHpvbmVJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudElEXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1cGRhdGVkRmllbGRzIC0gbmV3IGZpZWxkcy9lbGVtZW50c1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRzIC0gZmllbGRzL2VsZW1lbnRzIG9mIGN1cnJlbnQgY2FudmFzXHJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgY29uc3QgdHJhdmVyc2VBbmRVcGRhdGVUcmVlID0gKGRyb3B6b25lSUQsIHBhcmVudElELCB1cGRhdGVkRmllbGRzLCBmaWVsZHMgPSBzdGF0ZS50cmVlKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hdGNoZWRQYXJlbnRDYW52YXMgPSBmaWVsZHMuZmluZChmaWVsZCA9PiBmaWVsZC5pZCA9PT0gcGFyZW50SUQpO1xyXG4gICAgICBsZXQgcmV0dXJuU3RhdHVzID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBmb3VuZCBlbGVtZW50XHJcbiAgICAgIGlmIChtYXRjaGVkUGFyZW50Q2FudmFzKSB7XHJcbiAgICAgICAgaWYgKGRyb3B6b25lSUQgPT09IHBhcmVudElEKSB7XHJcbiAgICAgICAgICAvLyBmaXJzdCB0aW1lLCBjcmVhdGUgZmllbGRzXHJcbiAgICAgICAgICBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkcyA9IHVwZGF0ZWRGaWVsZHM7XHJcbiAgICAgICAgfSBlbHNlIGlmICghbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgfHwgIXVwZGF0ZWRGaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAvLyB1c2VyIHRyaWVkIHRvIHJlbW92ZSBlbGVtZW50c1xyXG4gICAgICAgICAgaWYgKGRyb3B6b25lSUQgJiYgbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMpIHtcclxuICAgICAgICAgICAgbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgPSBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkc1xyXG4gICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLmRyb3B6b25lSUQgIT09IGRyb3B6b25lSUQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbWF0Y2hlZCBjYW52YXMgZG9lcyBub3QgaGFzIHN1Y2ggZmllbGQsIGNyZWF0ZSBvbmVcclxuICAgICAgICAgICAgbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgPSB1cGRhdGVkRmllbGRzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBmaWVsZHNUb0JlQWRkZWQgPSBbXTtcclxuICAgICAgICAgIHVwZGF0ZWRGaWVsZHMuZm9yRWFjaCgodUZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkSW5kZXggPSBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkcy5maW5kSW5kZXgoZiA9PiBmLmlkID09PSB1RmllbGQuaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpZWxkSW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgZmllbGRzVG9CZUFkZGVkLnB1c2godUZpZWxkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkcyA9IG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzXHJcbiAgICAgICAgICAgICAgICAubWFwKChmLCBpKSA9PiAoaSA9PT0gZmllbGRJbmRleCA/IHVGaWVsZCA6IGYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gYWRkIG5ldyBmaWVsZCB0byBleGlzdGluZyBhcnJheVxyXG4gICAgICAgICAgaWYgKGZpZWxkc1RvQmVBZGRlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgPSBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkcy5jb25jYXQoZmllbGRzVG9CZUFkZGVkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVyblN0YXR1cyA9IHRydWU7XHJcblxyXG4gICAgICAgIC8qIGVzbGludCBuby1lbHNlLXJldHVybjogMCAqL1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGlsZEZpZWxkcyA9IGZpZWxkc1tpXS5maWVsZHM7XHJcbiAgICAgICAgICBsZXQgc3RhdHVzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgLy8gZmllbGQgaGFzIHN1Yi1maWVsZHMsIGNoZWNrIGluc2lkZSBzdWItZmllbGRzXHJcbiAgICAgICAgICBpZiAoY2hpbGRGaWVsZHMpIHtcclxuICAgICAgICAgICAgc3RhdHVzID0gdHJhdmVyc2VBbmRVcGRhdGVUcmVlKGRyb3B6b25lSUQsIHBhcmVudElELCB1cGRhdGVkRmllbGRzLCBjaGlsZEZpZWxkcyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXR1cm5TdGF0dXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHByaXZhdGUgZnVuY3Rpb24gdG8gdHJpZ2dlciBhbGwgY2hhbmdlIENCXHJcbiAgICBjb25zdCBub3RpZnlTdGF0ZUNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgLy8gdHJpZ2dlciBhbGwgZXZlbnRzXHJcbiAgICAgIGV2ZW50LmNoYW5nZS5mb3JFYWNoKGUgPT4gZShzdGF0ZS50cmVlKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGZ1bmN0aW9uIHRvIHVwZGF0ZSBzdGF0ZVxyXG4gICAgLy8gb25jZSB1cGRhdGUgZG9uZSwgdHJpZ2dlcnMgQ0IgYW5kIG5vdGlmeVN0YXRlQ2hhbmdlXHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlID0gKGRyb3B6b25lSUQsIHBhcmVudElELCBmaWVsZHMsIGNiID0gKCkgPT4ge30pID0+IHtcclxuICAgICAgdHJhdmVyc2VBbmRVcGRhdGVUcmVlKGRyb3B6b25lSUQsIHBhcmVudElELCBmaWVsZHMpO1xyXG4gICAgICBjYihzdGF0ZS50cmVlKTtcclxuICAgICAgbm90aWZ5U3RhdGVDaGFuZ2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0byByZXR1cm4gY3VycmVudCBzdGF0ZSBvZiB0cmVlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gLSBzdGF0ZSB0cmVlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZ2V0U3RhdGUgPSAoKSA9PiAoc3RhdGUudHJlZSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0byBjbGVhciB0aGUgc3RhdGVcclxuICAgICAqIGxvb3AgdGhvdWdoIGFsbCBwYXJlbnQoZW5kIGxldmVsKSBub2RlcywgYW5kIGNhbGwgYGZsdXNoRHJvcHBlZEVsZW1lbnRzYCBmdW5jdGlvblxyXG4gICAgICogc28gdGhhdCBjb21wb25lbnQgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbiBzdGF0ZSBnZXRzIGZsdXNoZWRcclxuICAgICAqL1xyXG4gICAgdGhpcy5jbGVhclN0YXRlID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCByb290Tm9kZSA9IHN0YXRlLnRyZWVbMF07XHJcbiAgICAgIGNvbnN0IHRvcExldmVsRmllbGRzID0gcm9vdE5vZGUuZmllbGRzLmxlbmd0aDtcclxuXHJcbiAgICAgIHJvb3ROb2RlLmZpZWxkcy5mb3JFYWNoKCh0b3BMZXZlbEVsZW1lbnQsIGkpID0+IHtcclxuICAgICAgICB0b3BMZXZlbEVsZW1lbnQuZmx1c2hEcm9wcGVkRWxlbWVudHMoKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGkgPT09IHRvcExldmVsRmllbGRzIC0gMSkge1xyXG4gICAgICAgICAgICBub3RpZnlTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHRvIGFkZCBldmVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgLSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSAoZXZlbnROYW1lLCBjYikgPT4ge1xyXG4gICAgICBsZXQgcmV0dXJuQ0IgPSBudWxsO1xyXG5cclxuICAgICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGNvcmUuZXJyb3IoJ2BjYmAgcGFyYW0gaGFzIHRvIGJlIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV2ZW50LCBldmVudE5hbWUpKSB7XHJcbiAgICAgICAgZXZlbnRbZXZlbnROYW1lXS5wdXNoKGNiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuQ0IgPSBjYjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb3JlLmVycm9yKCdObyBzdWNoIGV2ZW50Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXR1cm5DQjtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0byByZW1vdmUgZXZlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyID0gKGV2ZW50TmFtZSwgY2IpID0+IHtcclxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChldmVudCwgZXZlbnROYW1lKSkge1xyXG4gICAgICAgIGV2ZW50W2V2ZW50TmFtZV0gPSBldmVudFtldmVudE5hbWVdLmZpbHRlcihlID0+IGUgIT09IGNiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb3JlLmVycm9yKCdObyBzdWNoIGV2ZW50Jyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzdGF0ZSA9IG5ldyBTdGF0ZSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc3RhdGU7XHJcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG5pbXBvcnQgc3RhdGUgZnJvbSAnLi4vLi4vY29yZS9zdGF0ZSc7XHJcbmltcG9ydCBjb3JlIGZyb20gJy4uLy4uL2NvcmUvY29yZSc7XHJcblxyXG5jbGFzcyBEcm9wem9uZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgcmVmcmVuY2UgZm9yIGNhbnZhc1xyXG4gICAgLy8gdG8gY2hlY2sgd2hldGhlciBpcyBkcmFnZ2luZyBvbiBjdXJyZW50IGNhbnZhcyBvciBub3RcclxuICAgIHRoaXMuY2FudmFzUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcblxyXG4gICAgLy8gY29tcG9uZW50IHN0YXRlXHJcbiAgICAvLyBpbml0aWFsRWxlbWVudHMgLSB0byBrZWVwIHRyYWNrIG9mIGluaXRpYWwgZWxlbWVudHNcclxuICAgIC8vIGRyb3BwZWRFbGVtZW50cyAtIHRvIGtlZXAgdHJhY2sgb2YgbmV3bHkgYWRkZWQgZWxlbWVudHNcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGluaXRpYWxFbGVtZW50czogW10sXHJcbiAgICAgIGRyb3BwZWRFbGVtZW50czogW11cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICB0aGlzLl9zZXRJbml0aWFsRWxlbWVudHModGhpcy5wcm9wcy5pbml0aWFsRWxlbWVudHMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyh7IGluaXRpYWxFbGVtZW50cyB9KSB7XHJcbiAgICB0aGlzLl9zZXRJbml0aWFsRWxlbWVudHMoaW5pdGlhbEVsZW1lbnRzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIHNldCBpbml0aWFsIGVsZW1lbnRzXHJcbiAgICogQHBhcmFtIGluaXRpYWxFbGVtZW50cyB7QXJyYXl9IC0gSXQgaG9sZHMgYWxsIGluaXRpYWwgZWxlbWVudHMgdG8gYmUgc2hvd24gaW4gY2FudmFzXHJcbiAgICovXHJcbiAgX3NldEluaXRpYWxFbGVtZW50cyA9IChpbml0aWFsRWxlbWVudHMpID0+IHtcclxuICAgIC8vIGN1cnJlbnQgY29tcG9uZW50IHN0YXRlKGRyb3BwZWRFbGVtZW50cykgZG9lc24ndCBob2xkIGFueSBlbGVtZW50c1xyXG4gICAgLy8gYnV0IGluaXRpYWxFbGVtZW50cyBoYXMgc29tZSBlbGVtZW50IHRvIGJlIHNldFxyXG4gICAgY29uc3QgZ290SW5pdGlhbEl0ZW1zID0gQXJyYXkuaXNBcnJheShpbml0aWFsRWxlbWVudHMpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsRWxlbWVudHMubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5pbml0aWFsRWxlbWVudHMubGVuZ3RoO1xyXG5cclxuICAgIC8vIGZvciBmaXJzdCB0aW1lIGFkZCBpbml0aWFsRWxlbWVudHMgdG8gZHJvcHBlZEVsZW1lbnRzXHJcbiAgICBpZiAoZ290SW5pdGlhbEl0ZW1zKSB7XHJcbiAgICAgIGNvbnN0IHsgaWQ6IGRyb3B6b25lSUQgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRJbml0aWFsSXRlbXMgPSBpbml0aWFsRWxlbWVudHMubWFwKGUgPT4gKHtcclxuICAgICAgICAuLi5lLFxyXG4gICAgICAgIGtleTogZS5pZCxcclxuICAgICAgICBkcm9wem9uZUlELFxyXG4gICAgICAgIHNob3dCYXNpY0NvbnRlbnQ6IGZhbHNlLFxyXG4gICAgICAgIHJlbW92ZUVsZW1lbnQ6IHRoaXMuX3JlbW92ZUVsZW1lbnQsXHJcbiAgICAgICAgZmx1c2hEcm9wcGVkRWxlbWVudHM6IHRoaXMuX2ZsdXNoRHJvcHBlZEVsZW1lbnRzLFxyXG4gICAgICAgIGNoZWNrQW5kUmVtb3ZlRWxlbWVudDogdGhpcy5fY2hlY2tBbmRSZW1vdmVFbGVtZW50XHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGluaXRpYWxFbGVtZW50czogdXBkYXRlZEluaXRpYWxJdGVtcyxcclxuICAgICAgICBkcm9wcGVkRWxlbWVudHM6IHVwZGF0ZWRJbml0aWFsSXRlbXNcclxuICAgICAgfSwgKCkgPT4gKHRoaXMuX3VwZGF0ZVN0YXRlKCkpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIHRvZ2dsZS9tYW5hZ2UgY2xhc3MoaW5zaWRlKVxyXG4gICAqIGNsYXNzIGdldHMgYXBwZW5kZWQgdG8gY2FudmFzXHJcbiAgICogQHBhcmFtIHRhcmdldCB7RE9NfSAtIGN1cnJlbnQgY2FudmFzIHVwb24gd2hpY2ggdXNlIGlzIGhvdmVyaW5nXHJcbiAgICogQHBhcmFtIGFjdGlvbiB7U3RyaW5nfSAtIGFkZC9yZW1vdmUgLSBuYW1lIG9mIGFjdGlvblxyXG4gICAqL1xyXG4gIF9tYW5hZ2VJbnNpZGVDbGFzcyA9ICh7IHRhcmdldCB9LCBhY3Rpb24pID0+IHtcclxuICAgIGlmICh0aGlzLmNhbnZhc1JlZi5jdXJyZW50ID09PSB0YXJnZXQpIHtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdFthY3Rpb25dKCdpbnNpZGUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIHJlbW92ZSBlbGVtZW50IGZyb20gZHJvcHBlZEVsZW1lbnRzXHJcbiAgICogQHBhcmFtIGVsZW1lbnRJRCAtIHtTdHJpbmd9IC0gSUQgb2YgZWxlbWVudFxyXG4gICAqL1xyXG4gIF9yZW1vdmVFbGVtZW50ID0gKGVsZW1lbnRJRCkgPT4ge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBlbGVtZW50SUQpO1xyXG5cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkcm9wcGVkRWxlbWVudHM6IHRoaXMuc3RhdGUuZHJvcHBlZEVsZW1lbnRzLmZpbHRlcigoZCwgaSkgPT4gKGkgIT09IGluZGV4KSlcclxuICAgIH0sICgpID0+ICh0aGlzLl91cGRhdGVTdGF0ZSgpKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIGFwcGxpY2F0aW9uIHN0YXRlIChub3QgY29tcG9uZW50IHN0YXRlKVxyXG4gICAqIGZ1bmN0aW9uIHdpbGwgZnVydGhlciBjYWxsIGB1cGRhdGVTdGF0ZWAgZnJvbSBzdGF0ZSBBUEksIHdoaWNoIHVwZGF0ZXMgdGhlIGFwcGxpY2F0aW9uIHN0YXRlXHJcbiAgICogQHBhcmFtIGNiIHtmdW5jdGlvbn0gLSBjYWxsYmFjayBmdW5jdGlvbiAtIG9wdGlvbmFsXHJcbiAgICovXHJcbiAgX3VwZGF0ZVN0YXRlID0gKGNiID0gKCkgPT4ge30pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgaWQ6IGRyb3B6b25lSUQsXHJcbiAgICAgIHBhcmVudElEXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICBzdGF0ZS51cGRhdGVTdGF0ZShcclxuICAgICAgZHJvcHpvbmVJRCxcclxuICAgICAgcGFyZW50SUQsXHJcbiAgICAgIHRoaXMuc3RhdGUuZHJvcHBlZEVsZW1lbnRzLFxyXG4gICAgICBjYlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIGZsdXNoIHRoZSBjb21wb25lbnQgc3RhdGVcclxuICAgKiBvbmNlIGNvbXBvbmVudCBzdGF0ZSB0aHMgZmx1c2hlZCwgdGhpcyB3aWxsIGNhbGwgYF91cGRhdGVTdGF0ZWAgdG8gdXBkYXRlIHRoZVxyXG4gICAqIGFwcGxpY2F0aW9uIHN0YXRlXHJcbiAgICogQHBhcmFtIGNiIHtmdW5jdGlvbn0gLSBjYWxsYmFjayBmdW5jdGlvbiAtIG9wdGlvbmFsXHJcbiAgICovXHJcbiAgX2ZsdXNoRHJvcHBlZEVsZW1lbnRzID0gKGNiID0gKCkgPT4ge30pID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkcm9wcGVkRWxlbWVudHM6IFtdXHJcbiAgICB9LCAoKSA9PiAodGhpcy5fdXBkYXRlU3RhdGUoY2IpKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBmdW5jdGlvbiBjaGVjayBiZWxvdyBwYXJhbWV0ZXJzXHJcbiAgICogMSAtIHVzZXIncyBpbnRlbmQgaXMgdG8gbW92ZSBlbGVtZW50IGZyb20gb25lIGNhbnZhcyB0byBvdGhlclxyXG4gICAqIDIgLSBHZXQgY29uZmlybWF0aW9uIGJlZm9yZSByZW1vdmVcclxuICAgKiBvbmNlIGJvdGggY29uZGl0aW9uIG1hdGNoZWQgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gY3VycmVudCBjYW52YXNcclxuICAgKi9cclxuICBfY2hlY2tBbmRSZW1vdmVFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudE1vdmVkID0gY29yZS5nZXREcmFnZ2VkRWxlbWVudCgpO1xyXG4gICAgY29uc3QgeyByZW1vdmVFbGVtZW50LCBlbGVtZW50SUQgfSA9IGVsZW1lbnRNb3ZlZDtcclxuICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMucHJvcHMub25FbGVtZW50TW92ZShlbGVtZW50TW92ZWQpO1xyXG4gICAgY29uc3QgYXR0ZW1wdFRvTW92ZSA9ICFjb3JlLmdldEF0dGVtcHRUb1JlbW92ZSgpO1xyXG5cclxuICAgIGlmIChzdGF0dXMgJiYgYXR0ZW1wdFRvTW92ZSkge1xyXG4gICAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJRCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB1c2VyIGlzIGRyYWdnaW5nIG92ZXIgdGhlIGNhbnZhc1xyXG4gIC8vIGBwcmV2ZW50RGVmYXVsdGAgLSBSZXF1aXJlZC4gQWxsb3dzIHVzIHRvIGRyb3AuXHJcbiAgLy8gQHBhcmFtIGUge2V2ZW50fVxyXG4gIF9vbkRyYWdPdmVyID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVzZXIgaXMgbGVhdmluZyB0aGUgY2FudmFzXHJcbiAgICogQHBhcmFtIGUge2V2ZW50fVxyXG4gICAqL1xyXG4gIF9vbkRyYWdMZWF2ZSA9IChlKSA9PiB7XHJcbiAgICB0aGlzLl9tYW5hZ2VJbnNpZGVDbGFzcyhlLCAncmVtb3ZlJyk7XHJcbiAgICBjb3JlLnNldEF0dGVtcHRUb1JlbW92ZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVzZXIgaXMgZHJhZ2dpbmcgb3ZlciBjYW52YXNcclxuICAgKiBAcGFyYW0gZSB7ZXZlbnR9XHJcbiAgICovXHJcbiAgX29uRHJhZ0VudGVyID0gKGUpID0+IHtcclxuICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdhZGQnKTtcclxuICAgIGNvcmUuc2V0QXR0ZW1wdFRvUmVtb3ZlKGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVzZSBoYXMgZHJvcHBlZCB0aGUgZWxlbWVudCBpbnRvIHRoZSBjYW52YXNcclxuICAgKiBwZXJmb3JtIGFsbCByZXF1aXJlZCBjaGVja3NcclxuICAgKiBmdW5jdGlvbiBhbHNvIHRyaWdnZXJzIGBvbkRyb3BgIHByb3Agc28gdGhhdCB1c2V0IGNhbiBwcm92aWRlIGFkZGl0aW9uYWwgaW5mb1xyXG4gICAqIG9uY2UgYWxsIGRvbmUgYF9hZGRFbGVtZW50YCBnZXQgY2FsbGVkIHdpdGggYWxsIHJlcXVpcmVkIGluZm9cclxuICAgKiBAcGFyYW0gZSB7ZXZlbnR9XHJcbiAgICovXHJcbiAgX29uRHJvcCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIGNvcmUuc2V0QXR0ZW1wdFRvUmVtb3ZlKGZhbHNlKTtcclxuICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdyZW1vdmUnKTtcclxuXHJcbiAgICBjb25zdCB7IG9uRHJvcCB9ID0gdGhpcy5wcm9wcztcclxuICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdkYXRhJykpO1xyXG4gICAgZGF0YSA9IHsgLi4uZGF0YSB9O1xyXG5cclxuICAgIHJldHVybiBvbkRyb3AgPyBvbkRyb3AoZGF0YSwgdGhpcy5fYWRkRWxlbWVudCkgOiB0aGlzLl9hZGRFbGVtZW50KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZnVuY3Rpb24gdG8gYWRkIGVsZW1lbnQgaW50byBkcm9wcGVkRWxlbWVudHNcclxuICAgKiBwcmlvciB0byBhZGQgaXQgcGVyZm9tIGJlbG93IGNoZWNrXHJcbiAgICogMSAtIGVsZW1lbnQgaGFzIHVuaXF1ZSBrZXlcclxuICAgKiAyIC0gZWxlbWVudCBoYXMgaW52YWxpZCBkYXRhXHJcbiAgICogMyAtIGNoZWNrIGFnYWluc3QgbWF4LWNhcGFjaXR5XHJcbiAgICogb25jZSBlbGVtZW50IGFkZGVkIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHByZXZpb3VzIGNhbnZhc1xyXG4gICAqIEBwYXJhbSB1cGRhdGVkRGF0YSB7T2JqZWN0fSAtIGVsZW1lbnQgaW5mb3JtYXRpb25cclxuICAgKiBAcmV0dXJucyBPYmplY3QgLSBuZXcgbGlzdCBvZiBjYW52YXMgZWxlbWVudHNcclxuICAgKi9cclxuICBfYWRkRWxlbWVudCA9ICh1cGRhdGVkRGF0YSkgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBpZDogZHJvcHpvbmVJRCxcclxuICAgICAgY2FwYWNpdHlcclxuICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgZHJhZ2dlZEVsZW1lbnQgPSBjb3JlLmdldERyYWdnZWRFbGVtZW50KCk7XHJcbiAgICBjb25zdCBpbnZhbGlkVXBkYXRlZERhdGEgPSAhdXBkYXRlZERhdGEgfHwgIXVwZGF0ZWREYXRhLmlkO1xyXG4gICAgY29uc3Qga2V5QWxyZWFkeVByZXNlbnQgPSB1cGRhdGVkRGF0YS5pZCAmJlxyXG4gICAgICB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5maWx0ZXIoZSA9PiBlLmlkID09PSB1cGRhdGVkRGF0YS5pZCkubGVuZ3RoO1xyXG5cclxuICAgIC8vIGNoZWNrIGZvIHVuaXF1ZSBrZXlcclxuICAgIGlmIChpbnZhbGlkVXBkYXRlZERhdGEgfHwga2V5QWxyZWFkeVByZXNlbnQpIHtcclxuICAgICAgcmV0dXJuIGNvcmUuZXJyb3IoJ0R1cGxpY2F0ZSBvciBpbnZhbGlkIElEJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBuZXcgbGlzdFxyXG4gICAgY29uc3QgbmV3RWxlbWVudHMgPSB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5jb25jYXQoe1xyXG4gICAgICAuLi51cGRhdGVkRGF0YSxcclxuICAgICAga2V5OiB1cGRhdGVkRGF0YS5pZCxcclxuICAgICAgZHJvcHpvbmVJRCxcclxuICAgICAgc2hvd0Jhc2ljQ29udGVudDogZmFsc2UsXHJcbiAgICAgIHJlbW92ZUVsZW1lbnQ6IHRoaXMuX3JlbW92ZUVsZW1lbnQsXHJcbiAgICAgIGZsdXNoRHJvcHBlZEVsZW1lbnRzOiB0aGlzLl9mbHVzaERyb3BwZWRFbGVtZW50cyxcclxuICAgICAgY2hlY2tBbmRSZW1vdmVFbGVtZW50OiB0aGlzLl9jaGVja0FuZFJlbW92ZUVsZW1lbnRcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGNoZWNrIG5ldyBsaXN0IGFnYWluc3QgbWF4LWNhcGFjaXR5XHJcbiAgICBpZiAoY2FwYWNpdHkgJiYgbmV3RWxlbWVudHMubGVuZ3RoID4gY2FwYWNpdHkpIHtcclxuICAgICAgcmV0dXJuIGNvcmUuZXJyb3IoYE1heGltdW0gY2FwYWNpdHkgb2YgY2FudmFzKCR7ZHJvcHpvbmVJRH0pIGlzICR7Y2FwYWNpdHl9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdXBkYXRlIHRoZSBjdXJyZW50IGxpc3RcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkcm9wcGVkRWxlbWVudHM6IG5ld0VsZW1lbnRzXHJcbiAgICB9LCAoKSA9PiB7XHJcbiAgICAgIC8vIHJlbW92ZSBlbGVtZW50IGZyb20gcHJldmlvdXMgY2FudmFzXHJcbiAgICAgIGlmIChkcmFnZ2VkRWxlbWVudCAmJiB0eXBlb2YgZHJhZ2dlZEVsZW1lbnQuY2hlY2tBbmRSZW1vdmVFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZHJhZ2dlZEVsZW1lbnQuY2hlY2tBbmRSZW1vdmVFbGVtZW50KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHVwZGF0ZSB0aGUgYXBwbGljYXRpb24gc3RhdGVcclxuICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRyb3B6b25lSUQsXHJcbiAgICAgIGVsZW1lbnRzOiBuZXdFbGVtZW50c1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgZHJhZ2dlZCBlbGVtZW50XHJcbiAgICogQHBhcmFtIHByb3BzIHtPYmplY3R9IC0gQW4gb2JqZWN0IHdoaWNoIGhvbGQgdGhlIGluZm8gb2YgZHJhZ2dlZCBlbGVtZW50L2NvbXBvbmVudFxyXG4gICAqIEByZXR1cm5zIEpTWFxyXG4gICAqL1xyXG4gIF9yZW5kZXJEcmFnSXRlbSA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGNvcmUuZ2V0UmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cygpLmZpbmQoZSA9PiBlLnR5cGUgPT09IHByb3BzLnR5cGUpO1xyXG4gICAgcmV0dXJuIGVsZW1lbnQgPyA8ZWxlbWVudC5jb21wb25lbnQgey4uLnByb3BzfSAvPiA6IG51bGw7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGRyb3BwZWRFbGVtZW50cyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgY2FwYWNpdHksIGlkIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXZcclxuICAgICAgICByZWY9e3RoaXMuY2FudmFzUmVmfVxyXG4gICAgICAgIGNsYXNzTmFtZT17YCR7Y2FwYWNpdHkgJiYgY2FwYWNpdHkgPT09IGRyb3BwZWRFbGVtZW50cy5sZW5ndGggPyAnbm8tc3BhY2UnIDogJyd9ICR7aWQgPT09ICdyb290JyA/ICdjYW52YXMnIDogJyd9IGRyb3B6b25lYH1cclxuICAgICAgICBvbkRyYWdPdmVyPXt0aGlzLl9vbkRyYWdPdmVyfVxyXG4gICAgICAgIG9uRHJhZ0xlYXZlPXt0aGlzLl9vbkRyYWdMZWF2ZX1cclxuICAgICAgICBvbkRyYWdFbnRlcj17dGhpcy5fb25EcmFnRW50ZXJ9XHJcbiAgICAgICAgb25Ecm9wPXt0aGlzLl9vbkRyb3B9XHJcbiAgICAgICAgb25EcmFnRW5kPXt0aGlzLl9vbkRyYWdFbmR9XHJcbiAgICAgID5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBkcm9wcGVkRWxlbWVudHMubWFwKGUgPT4gKFxyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJEcmFnSXRlbSh7IC4uLmUgfSlcclxuICAgICAgICAgICkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAhZHJvcHBlZEVsZW1lbnRzLmxlbmd0aCA/XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtpZCA9PT0gJ3Jvb3QnID8gJ2NhbnZhcycgOiAnJ30gZHJvcHpvbmVgfT5cclxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJkcm9wem9uZS1lbXB0eVwiPkRyb3AgSGVyZTwvcD5cclxuICAgICAgICAgICAgPC9kaXY+IDogbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuRHJvcHpvbmUucHJvcFR5cGVzID0ge1xyXG4gIGlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgY2FwYWNpdHk6IFByb3BUeXBlcy5udW1iZXIsXHJcbiAgb25Ecm9wOiBQcm9wVHlwZXMuZnVuYyxcclxuICBvbkVsZW1lbnRNb3ZlOiBQcm9wVHlwZXMuZnVuYyxcclxuICBpbml0aWFsRWxlbWVudHM6IFByb3BUeXBlcy5pbnN0YW5jZU9mKFByb3BUeXBlcy5hcnJheSksXHJcbiAgcGFyZW50SUQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxyXG59O1xyXG5cclxuRHJvcHpvbmUuZGVmYXVsdFByb3BzID0ge1xyXG4gIGluaXRpYWxFbGVtZW50czogW10sXHJcbiAgb25FbGVtZW50TW92ZTogKCkgPT4gKHRydWUpXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcm9wem9uZTtcclxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIFZlcnkgYmFzaWMgc3R5bGUgKi9cXHJcXG5cXHJcXG4vKiBQcmV2ZW50IHRoZSB0ZXh0IGNvbnRlbnRzIG9mIGRyYWdnYWJsZSBlbGVtZW50cyBmcm9tIGJlaW5nIHNlbGVjdGFibGUuICovXFxyXFxuW2RyYWdnYWJsZV0ge1xcclxcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG5cXHJcXG4gIC8qIFJlcXVpcmVkIHRvIG1ha2UgZWxlbWVudHMgZHJhZ2dhYmxlIGluIG9sZCBXZWJLaXQgKi9cXHJcXG4gIC1raHRtbC11c2VyLWRyYWc6IGVsZW1lbnQ7XFxyXFxuICAtd2Via2l0LXVzZXItZHJhZzogZWxlbWVudDtcXHJcXG59XFxyXFxuXFxyXFxuLyogY2xhc3MgZ2V0cyBhcHBlbmRlZCB0byBjYW52YXMgd2hlbiB1c2VyIGRyYWdnaW5nIG92ZXIgb24gaXQgKi9cXHJcXG4uaW5zaWRlIHtcXHJcXG4gIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDI2cHggMC41cHggcmdiYSgyMCwgMTgwLCA4MSwgMC43NSk7XFxyXFxuICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDAgMCAyNnB4IDAuNXB4IHJnYmEoMjAsIDE4MCwgODEsIDAuNzUpO1xcclxcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDI2cHggMC41cHggcmdiYSgyMCwgMTgwLCA4MSwgMC43NSk7XFxyXFxufVxcclxcblxcclxcbi50cmFzaC1ib3guaW5zaWRlLFxcclxcbi5kcm9wem9uZS5pbnNpZGUubm8tc3BhY2Uge1xcclxcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDAgMjZweCAwLjVweCByZ2JhKDIzMCwgMjMsIDIzLCAwLjUpO1xcclxcbiAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDAgMjZweCAwLjVweCByZ2JhKDIzMCwgMjMsIDIzLCAwLjc1KTtcXHJcXG4gIGJveC1zaGFkb3c6IGluc2V0IDAgMCAyNnB4IDAuNXB4IHJnYmEoMjMwLCAyMywgMjMsIDAuNzUpO1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcHpvbmUge1xcclxcbiAgd2lkdGg6IDEwMCU7XFxyXFxuICBwYWRkaW5nOiAxMHB4O1xcclxcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gIGJhY2tncm91bmQ6ICNmMGZhZmY7XFxyXFxuICBib3JkZXI6IDFweCBzb2xpZCAjMDI3N2JkO1xcclxcbn1cXHJcXG5cXHJcXG4ucGFsZXR0ZSB7XFxyXFxuICBwYWRkaW5nOiAxMHB4O1xcclxcbiAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICBib3JkZXI6IDFweCBzb2xpZCAjMDE1NzliO1xcclxcbn1cXHJcXG5cXHJcXG4uZHJhZy1pdGVtIHtcXHJcXG4gIHBhZGRpbmc6IDEwcHg7XFxyXFxuICBjb2xvcjogIzAxNTc5YjtcXHJcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjNlNWZjO1xcclxcbiAgYm9yZGVyOiAxcHggc29saWQgIzAxNTc5YjtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3B6b25lLWVtcHR5IHtcXHJcXG4gIGNvbG9yOiAjMDE1NzliO1xcclxcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgYW5pbWF0aW9uLW5hbWU6IGNoYW5nZUNvbG9yO1xcclxcbiAgYW5pbWF0aW9uLWR1cmF0aW9uOiAycztcXHJcXG4gIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2UtaW4tb3V0O1xcclxcbiAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XFxyXFxufVxcclxcblxcclxcbkBrZXlmcmFtZXMgY2hhbmdlQ29sb3Ige1xcclxcbiAgMjUlIHtcXHJcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIDc1JSB7XFxyXFxuICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XFxyXFxuICAgIG9wYWNpdHk6IDAuNTtcXHJcXG4gIH1cXHJcXG59XFxyXFxuXFxyXFxuLnBhbGV0dGUtd3JhcHBlciAuZHJhZy1pdGVtIHtcXHJcXG4gIGNvbG9yOiAjZmZmO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAxNTc5YjtcXHJcXG59XFxyXFxuXFxyXFxuLmRyYWctaXRlbSArIGRpdiB7XFxyXFxuICBtYXJnaW4tdG9wOiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4udHJhc2gtYm94IHtcXHJcXG4gIHBhZGRpbmc6IDMwcHggMTBweDtcXHJcXG4gIG1hcmdpbjogMTBweCAwO1xcclxcbiAgY29sb3I6ICNiNzFjMWM7XFxyXFxuICBiYWNrZ3JvdW5kOiAjZmZjZGQyO1xcclxcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgYm9yZGVyOiAxcHggc29saWQgI2I3MWMxYztcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBjb3JlIGZyb20gJy4uLy4uL2NvcmUvY29yZSc7XHJcblxyXG5jbGFzcyBUcmFzaCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgcmVmcmVuY2UgZm9yIHRyYXNoXHJcbiAgICAvLyB0byBjaGVjayB3aGV0aGVyIGlzIGRyYWdnaW5nIG9uIHRyYXNoIGJveCBvciBub3RcclxuICAgIHRoaXMudHJhc2hSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZ1bmN0aW9uIHRvIHRvZ2dsZS9tYW5hZ2UgY2xhc3MoaW5zaWRlKVxyXG4gICAqIGNsYXNzIGdldHMgYXBwZW5kZWQgdG8gY2FudmFzXHJcbiAgICogQHBhcmFtIHRhcmdldCB7RE9NfSAtIGN1cnJlbnQgY2FudmFzIHVwb24gd2hpY2ggdXNlIGlzIGhvdmVyaW5nXHJcbiAgICogQHBhcmFtIGFjdGlvbiB7U3RyaW5nfSAtIGFkZC9yZW1vdmUgLSBuYW1lIG9mIGFjdGlvblxyXG4gICAqL1xyXG4gIF9tYW5hZ2VJbnNpZGVDbGFzcyA9ICh7IHRhcmdldCB9LCBhY3Rpb24pID0+IHtcclxuICAgIGlmICh0aGlzLnRyYXNoUmVmLmN1cnJlbnQgPT09IHRhcmdldCkge1xyXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0W2FjdGlvbl0oJ2luc2lkZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX29uRHJvcCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIC8vIGdldCBkcmFnZ2VkIGVsZW1lbnRcclxuICAgIGNvbnN0IGVsZW1lbnRUb0JlVHJhc2hlZCA9IGNvcmUuZ2V0RHJhZ2dlZEVsZW1lbnQoKTtcclxuXHJcbiAgICAvLyBkb250IGFsbG93IGVsZW1lbnRzIHdoaWNoIGRpcmVjdGx5IGNvbWluZyBmcm9tIHBhbGV0dGVcclxuICAgIGlmICghZWxlbWVudFRvQmVUcmFzaGVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IG9uQmVmb3JlVHJhc2gsIG9uQWZ0ZXJUcmFzaCB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgcmVtb3ZlRWxlbWVudCB9ID0gZWxlbWVudFRvQmVUcmFzaGVkO1xyXG4gICAgY29uc3Qgc3RhdHVzID0gb25CZWZvcmVUcmFzaChlbGVtZW50VG9CZVRyYXNoZWQpO1xyXG5cclxuICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdyZW1vdmUnKTtcclxuXHJcbiAgICAvLyB1c2VyIHRyaWVkIGFuZCBjb25maXJtIHRvIHJlbW92ZSBlbGVtZW50XHJcbiAgICBpZiAoc3RhdHVzICYmIGNvcmUuZ2V0QXR0ZW1wdFRvUmVtb3ZlKCkpIHtcclxuICAgICAgLy8gcmVtb3ZlIGVsZW1lbnQgZnJvbSBjdXJyZW50IGNhbnZhc1xyXG4gICAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRUb0JlVHJhc2hlZC5lbGVtZW50SUQpO1xyXG5cclxuICAgICAgLy8gZG9uZSBkcmFnZ2luZywgZmx1c2ggdGhlIGRyYWdnZWQgZWxlbWVudFxyXG4gICAgICBjb3JlLnNldERyYWdnZWRFbGVtZW50KG51bGwpO1xyXG5cclxuICAgICAgLy8gYWNrbm93bGVkZ2VcclxuICAgICAgb25BZnRlclRyYXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVzZXQgYXR0ZW1wdCB0byByZW1vdmVcclxuICAgIGNvcmUuc2V0QXR0ZW1wdFRvUmVtb3ZlKGZhbHNlKTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIHVzZXIgaXMgZHJhZ2dpbmcgb3ZlciB0aGUgdHJhc2hcclxuICAvLyBgcHJldmVudERlZmF1bHRgIC0gUmVxdWlyZWQuIEFsbG93cyB1cyB0byBkcm9wLlxyXG4gIC8vIEBwYXJhbSBlIHtldmVudH1cclxuICBfb25EcmFnT3ZlciA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB1c2VyIGlzIGxlYXZpbmcgdGhlIHRyYXNoXHJcbiAgICogQHBhcmFtIGUge2V2ZW50fVxyXG4gICAqL1xyXG4gIF9vbkRyYWdMZWF2ZSA9IChlKSA9PiB7XHJcbiAgICB0aGlzLl9tYW5hZ2VJbnNpZGVDbGFzcyhlLCAncmVtb3ZlJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB1c2VyIGlzIGRyYWdnaW5nIG92ZXIgdHJhc2hcclxuICAgKiBAcGFyYW0gZSB7ZXZlbnR9XHJcbiAgICovXHJcbiAgX29uRHJhZ0VudGVyID0gKGUpID0+IHtcclxuICAgIGNvbnN0IGVsZW1lbnRUb0JlVHJhc2hlZCA9IGNvcmUuZ2V0RHJhZ2dlZEVsZW1lbnQoKTtcclxuXHJcbiAgICBpZiAoZWxlbWVudFRvQmVUcmFzaGVkKSB7XHJcbiAgICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdhZGQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXZcclxuICAgICAgICByZWY9e3RoaXMudHJhc2hSZWZ9XHJcbiAgICAgICAgY2xhc3NOYW1lPVwidHJhc2gtYm94XCJcclxuICAgICAgICBvbkRyYWdMZWF2ZT17dGhpcy5fb25EcmFnTGVhdmV9XHJcbiAgICAgICAgb25EcmFnRW50ZXI9e3RoaXMuX29uRHJhZ0VudGVyfVxyXG4gICAgICAgIG9uRHJhZ092ZXI9e3RoaXMuX29uRHJhZ092ZXJ9XHJcbiAgICAgICAgb25Ecm9wPXt0aGlzLl9vbkRyb3B9XHJcbiAgICAgID5cclxuICAgICAgICB7IHRoaXMucHJvcHMuY2hpbGRyZW4gfHwgPHNwYW4+VHJhc2ggQm94PC9zcGFuPiB9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcblRyYXNoLnByb3BUeXBlcyA9IHtcclxuICBvbkJlZm9yZVRyYXNoOiBQcm9wVHlwZXMuZnVuYyxcclxuICBvbkFmdGVyVHJhc2g6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcclxuICAgIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5lbGVtZW50KSxcclxuICAgIFByb3BUeXBlcy5lbGVtZW50XHJcbiAgXSksXHJcbn07XHJcblxyXG5UcmFzaC5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgb25CZWZvcmVUcmFzaDogKCkgPT4gKHRydWUpLFxyXG4gIG9uQWZ0ZXJUcmFzaDogKCkgPT4gKHRydWUpXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUcmFzaDtcclxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBjb3JlIGZyb20gJy4uLy4uL2NvcmUvY29yZSc7XHJcblxyXG5jbGFzcyBQYWxldHRlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAvKipcclxuICAgKiBmdW5jdGlvbiB0byByZW5kZXIgdGhlIGRyYWdnZWQgZWxlbWVudFxyXG4gICAqIEBwYXJhbSBwcm9wcyB7T2JqZWN0fSAtIEFuIG9iamVjdCB3aGljaCBob2xkIHRoZSBpbmZvIG9mIGRyYWdnZWQgZWxlbWVudC9jb21wb25lbnRcclxuICAgKiBAcmV0dXJucyBKU1hcclxuICAgKi9cclxuICBfcmVuZGVyTGlzdCA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGNvcmUuZ2V0UmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cygpLmZpbmQoZSA9PiBlLnR5cGUgPT09IHByb3BzLnR5cGUpO1xyXG4gICAgcmV0dXJuIGVsZW1lbnQgPyA8ZWxlbWVudC5jb21wb25lbnQgey4uLnByb3BzfSAvPiA6IG51bGw7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHBhbGV0dGVFbGVtZW50cyB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbGV0dGVcIj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwYWxldHRlRWxlbWVudHMubWFwKGl0ZW0gPT4gKFxyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJMaXN0KHsgLi4uaXRlbSwga2V5OiBpdGVtLmlkLCBzaG93QmFzaWNDb250ZW50OiB0cnVlIH0pXHJcbiAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuUGFsZXR0ZS5wcm9wVHlwZXMgPSB7XHJcbiAgcGFsZXR0ZUVsZW1lbnRzOiBQcm9wVHlwZXMuYXJyYXlPZigocHJvcFZhbHVlKSA9PiB7XHJcbiAgICBsZXQgaXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGFsbCBwYWxldHRlIGVsZW1lbnRzIHNob3VsZCBoYXZlIHVuaXF1ZSBJRFxyXG4gICAgcHJvcFZhbHVlLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKGl0ZW0gJiYgIWl0ZW0uaWQpIHtcclxuICAgICAgICBpc0Vycm9yID0gJ2BpZGAgaXMgcmVxdWlyZWQgaW4gYWxsIHBhbGV0dGUgZWxlbWVudCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwcm9wVmFsdWUuZmlsdGVyKGkgPT4gaS5pZCA9PT0gaXRlbS5pZCkubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGlzRXJyb3IgPSAnYGlkYCBvZiBwYWxldHRlIGVsZW1lbnQgc2hvdWxkIGJlIHVuaXF1ZSc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpc0Vycm9yID8gbmV3IEVycm9yKGlzRXJyb3IpIDogdHJ1ZTtcclxuICB9KVxyXG59O1xyXG5cclxuUGFsZXR0ZS5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgcGFsZXR0ZUVsZW1lbnRzOiBbXVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGFsZXR0ZTtcclxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmltcG9ydCBjb3JlIGZyb20gJy4uLy4uL2NvcmUvY29yZSc7XHJcblxyXG5jbGFzcyBEcmFnZ2FibGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIF9kcmFnRW5kID0gKGUpID0+IHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgLy8gZG9uZSBkcmFnZ2luZywgcmVzZXQgZHJhZ2dlZCBlbGVtZW50XHJcbiAgICBjb3JlLnNldERyYWdnZWRFbGVtZW50KG51bGwpO1xyXG4gIH1cclxuXHJcbiAgX2RyYWdTdGFydCA9IChlKSA9PiB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIGNvbnN0IHtcclxuICAgICAgaWQsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIHBheWxvYWQsXHJcbiAgICAgIGRyb3B6b25lSUQsXHJcbiAgICAgIHJlbW92ZUVsZW1lbnQsXHJcbiAgICAgIGNoZWNrQW5kUmVtb3ZlRWxlbWVudFxyXG4gICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgaWQsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIHBheWxvYWRcclxuICAgIH07XHJcblxyXG4gICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdjb3B5JztcclxuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ2RhdGEnLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7IC8vIHJlcXVpcmVkLCB3ZSBjYW5uJ3QgcGFzcyBKUyBvYmplY3RcclxuXHJcbiAgICAvLyBpZiBlbGVtZW50IGlzIGFscmVhZHkgcHJlc2VudCBpbiBzb21lIGNhbnZhc1xyXG4gICAgLy8gdGhlbiBzZXQgZHJhZ2dlZEVsZW1lbnQsIHNvIHRoYXQgdGhpcyB3aWxsIGhlbHAgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gcHJldmlvdXMgY2FudmFzXHJcbiAgICBpZiAoZHJvcHpvbmVJRCkge1xyXG4gICAgICBjb3JlLnNldERyYWdnZWRFbGVtZW50KHtcclxuICAgICAgICBlbGVtZW50SUQ6IGlkLFxyXG4gICAgICAgIGRyb3B6b25lSUQsXHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudCxcclxuICAgICAgICBjaGVja0FuZFJlbW92ZUVsZW1lbnRcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGVsZW1lbnRQcm9wcyB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgY2xhc3NOYW1lPVwiZHJhZy1pdGVtXCJcclxuICAgICAgICBvbkRyYWdTdGFydD17dGhpcy5fZHJhZ1N0YXJ0fVxyXG4gICAgICAgIG9uRHJhZ0VuZD17dGhpcy5fZHJhZ0VuZH1cclxuICAgICAgICBkcmFnZ2FibGVcclxuICAgICAgICB7Li4uZWxlbWVudFByb3BzfVxyXG4gICAgICA+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuRHJhZ2dhYmxlLnByb3BUeXBlcyA9IHtcclxuICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgZHJvcHpvbmVJRDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBwYXlsb2FkOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihQcm9wVHlwZXMub2JqZWN0KSxcclxuICBlbGVtZW50UHJvcHM6IFByb3BUeXBlcy5pbnN0YW5jZU9mKFByb3BUeXBlcy5vYmplY3QpLFxyXG4gIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXHJcbiAgICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZWxlbWVudCksXHJcbiAgICBQcm9wVHlwZXMuZWxlbWVudFxyXG4gIF0pLmlzUmVxdWlyZWQsXHJcbiAgcmVtb3ZlRWxlbWVudDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgY2hlY2tBbmRSZW1vdmVFbGVtZW50OiBQcm9wVHlwZXMuZnVuY1xyXG59O1xyXG5cclxuRHJhZ2dhYmxlLmRlZmF1bHRQcm9wcyA9IHtcclxuICBjaGVja0FuZFJlbW92ZUVsZW1lbnQ6ICgpID0+ICh0cnVlKSxcclxuICBlbGVtZW50UHJvcHM6IG51bGwsXHJcbiAgcGF5bG9hZDogbnVsbFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlO1xyXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIHZhbGlkYXRlRm9ybWF0ID0gZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZm9ybWF0KSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFsaWRhdGVGb3JtYXQgPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICB2YWxpZGF0ZUZvcm1hdChmb3JtYXQpO1xuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgKyAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KSk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBcbiAqL1xuXG5mdW5jdGlvbiBtYWtlRW1wdHlGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYXJnO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbmQgZGlzY2FyZHMgaW5wdXRzOyBpdCBoYXMgbm8gc2lkZSBlZmZlY3RzLiBUaGlzIGlzXG4gKiBwcmltYXJpbHkgdXNlZnVsIGlkaW9tYXRpY2FsbHkgZm9yIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGVuZHBvaW50cyB3aGljaFxuICogYWx3YXlzIG5lZWQgdG8gYmUgY2FsbGFibGUsIHNpbmNlIEpTIGxhY2tzIGEgbnVsbC1jYWxsIGlkaW9tIGFsYSBDb2NvYS5cbiAqL1xudmFyIGVtcHR5RnVuY3Rpb24gPSBmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCkge307XG5cbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnMgPSBtYWtlRW1wdHlGdW5jdGlvbjtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKGZhbHNlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlID0gbWFrZUVtcHR5RnVuY3Rpb24odHJ1ZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCA9IG1ha2VFbXB0eUZ1bmN0aW9uKG51bGwpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RoaXMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNBcmd1bWVudCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgcmV0dXJuIGFyZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZW1wdHlGdW5jdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSByZXF1aXJlKCcuL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHtcbiAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgZmFsc2UsXG4gICAgICAnQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJyArXG4gICAgICAnVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gJyArXG4gICAgICAnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcydcbiAgICApO1xuICB9O1xuICBzaGltLmlzUmVxdWlyZWQgPSBzaGltO1xuICBmdW5jdGlvbiBnZXRTaGltKCkge1xuICAgIHJldHVybiBzaGltO1xuICB9O1xuICAvLyBJbXBvcnRhbnQhXG4gIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IHNoaW0sXG4gICAgYm9vbDogc2hpbSxcbiAgICBmdW5jOiBzaGltLFxuICAgIG51bWJlcjogc2hpbSxcbiAgICBvYmplY3Q6IHNoaW0sXG4gICAgc3RyaW5nOiBzaGltLFxuICAgIHN5bWJvbDogc2hpbSxcblxuICAgIGFueTogc2hpbSxcbiAgICBhcnJheU9mOiBnZXRTaGltLFxuICAgIGVsZW1lbnQ6IHNoaW0sXG4gICAgaW5zdGFuY2VPZjogZ2V0U2hpbSxcbiAgICBub2RlOiBzaGltLFxuICAgIG9iamVjdE9mOiBnZXRTaGltLFxuICAgIG9uZU9mOiBnZXRTaGltLFxuICAgIG9uZU9mVHlwZTogZ2V0U2hpbSxcbiAgICBzaGFwZTogZ2V0U2hpbSxcbiAgICBleGFjdDogZ2V0U2hpbVxuICB9O1xuXG4gIFJlYWN0UHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzID0gZW1wdHlGdW5jdGlvbjtcbiAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7XG5cbiAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzO1xufTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgRHJvcHpvbmUgZnJvbSAnLi4vRHJvcHpvbmUvRHJvcHpvbmUnO1xyXG5cclxuLy8gZHVtcCBjb21wb25lbnQgd2hpY2ggZXh0ZW5kcyBEcm9wem9uZSBidXQgd2l0aCBzb21lIGZpeGVkIHByb3BlcnRpZXMgLSBpZCBhbmQgcGFyZW50SURcclxuLy8gYm90aCBwcm9wcyBzZXQgdG8gYHJvb3RgIC0gcmVxdWlyZWQgc2luY2UgYXBwbGljYXRpb24gc3RhdGUgaG9sZHMgYHJvb3RgIGFzIHBhcmVudCBub2RlXHJcbmNvbnN0IENhbnZhcyA9IHByb3BzID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT1cIm1haW4tY2FudmFzXCI+XHJcbiAgICA8RHJvcHpvbmUgey4uLnByb3BzfSBwYXJlbnRJRD1cInJvb3RcIiBpZD1cInJvb3RcIiAvPlxyXG4gIDwvZGl2PlxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzO1xyXG4iLCIvLyBpbXBvcnQgYWxsIGNvbXBvbmVudHNcclxuaW1wb3J0IENhbnZhcyBmcm9tICcuL2NvbXBvbmVudHMvQ2FudmFzL0NhbnZhcyc7XHJcbmltcG9ydCBEcm9wem9uZSBmcm9tICcuL2NvbXBvbmVudHMvRHJvcHpvbmUvRHJvcHpvbmUnO1xyXG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJy4vY29tcG9uZW50cy9EcmFnZ2FibGUvRHJhZ2dhYmxlJztcclxuaW1wb3J0IFBhbGV0dGUgZnJvbSAnLi9jb21wb25lbnRzL1BhbGV0dGUvUGFsZXR0ZSc7XHJcbmltcG9ydCBUcmFzaCBmcm9tICcuL2NvbXBvbmVudHMvVHJhc2gvVHJhc2gnO1xyXG5cclxuLy8gaW1wb3J0IGFsbCBBUEknc1xyXG5pbXBvcnQgc3RhdGUgZnJvbSAnLi9jb3JlL3N0YXRlJztcclxuaW1wb3J0IGNvcmUgZnJvbSAnLi9jb3JlL2NvcmUnO1xyXG5cclxuLy8gaW1wb3J0IGJhc2ljIHN0eWxlXHJcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgLy8gYWxsIGNvbXBvbmVudHNcclxuICBDYW52YXMsXHJcbiAgRHJvcHpvbmUsXHJcbiAgRHJhZ2dhYmxlLFxyXG4gIFBhbGV0dGUsXHJcbiAgVHJhc2gsXHJcblxyXG4gIC8vIGFsbCBvcGVuIEFQSSdzXHJcbiAgc3RhdGUsXHJcbiAgY29yZSxcclxuXHJcbiAgLy8gc2luY2UgdGhpcyBpcyByZXVpcmVkIGZ1bmN0aW9uLCBrZWVwaW5nIHNlcHJhdGVcclxuICByZWdpc3RlclBhbGV0dGVFbGVtZW50czogY29yZS5yZWdpc3RlclBhbGV0dGVFbGVtZW50c1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9